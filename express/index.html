<!DOCTYPE html>
<meta charset="utf-8">

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

<!-- radar chart import-->
<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>
<script src="https://d3js.org/d3.v3.js" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/1.3.0/d3-legend.js" charset="utf-8"></script>
<script src="src/radar-chart2.js"></script>
<link rel="stylesheet" href="src/charts.css">

<!--line chart import-->
<script src="https://www.chartjs.org/dist/2.9.4/Chart.min.js"></script>
<script src="https://www.chartjs.org/samples/latest/utils.js"></script>



<title>TestTemplate</title>

<head>
	<style>
		.tooltip {
			fill: #333333;
		}
	</style>
	<style>
		#table-location {
			margin-left: 10%;
			margin-right: auto;
			width: 70%;
		}
	</style>


</head>

<body>
	<h1
		style="text-align: center;background-color: darkgray;margin-top: 0;padding-top: 20px;font-family:'Times New Roman', Times, serif, sans-serif;">
		특산품 Admin Pannel</h1>

	<div class="radar-chart-container">
		<div class="radarChart" style="align-content: center;">
			<p style="text-align:center;font-size: 30px;">각 군 평균체력</p>
		</div>
	</div>

	<div style="width:90%;">
		<canvas id="canvas"></canvas>
	</div>

	<div id="table-location"></div>



	<script>
		var margin = { top: 100, right: 100, bottom: 100, left: 100 },
			legendPosition = { x: 25, y: 25 },
			width = Math.min(700, window.innerWidth - 10) - margin.left - margin.right,
			height = Math.min(width, window.innerHeight - margin.top - margin.bottom - 20);

		var color = d3.scale.ordinal().range(["#FFD700", "#0c18b9c2", "#079442ce"]);

		var radarChartOptions = {
			w: width,
			h: height,
			margin: margin,
			legendPosition: legendPosition,
			maxValue: 5,
			wrapWidth: 60,
			levels: 5,
			roundStrokes: false,
			color: color,
			axisName: "axis",
			areaName: "key",
			value: "value"
		};

		d3.json("DataDir/class_average.json", function (error, data) {
			RadarChart(".radarChart", data, radarChartOptions);
		});

	</script>

	<!--Table script-->
	<script>
		var svg = d3.select("body").append("svg")
			.attr("height", 1)
			.attr("width", 1);
		var table = d3.select("#table-location")
			.append("table")
			.attr("class", "table table-condensed table-striped"),
			thead = table.append("thead"),
			tbody = table.append("tbody");

		d3.json("DataDir/table_data.json", function (error, data) {

			// Get every column value
			var columns = Object.keys(data[0])
				.filter(function (d) {
					return ((d != "Year"));
				});

			var header = thead.append("tr")
				.selectAll("th")
				.data(columns)
				.enter()
				.append("th")
				.text(function (d) { return d; })
				.on("click", function (d) {
					if (d == "각군" || d == "사령부" || d == "전대" || d == "부대명") {
						rows.sort(function (a, b) {
							if (a[d] < b[d]) {
								return -1;
							}
							if (a[d] > b[d]) {
								return 1;
							}
							else {
								return 0;
							}
						});
					}
					else {
						rows.sort(function (a, b) {
							return b[d] - a[d];
						})
					}
				});

			var rows = tbody.selectAll("tr")
				.data(data)
				.enter()
				.append("tr")
				.on("mouseover", function (d) {
					d3.select(this)
						.style("background-color", "orange");
				})
				.on("mouseout", function (d) {
					d3.select(this)
						.style("background-color", "transparent");
				});

			var cells = rows.selectAll("td")
				.data(function (row) {
					return columns.map(function (d, i) {
						return { i: d, value: row[d] };
					});
				})
				.enter()
				.append("td")
				.html(function (d) { return d.value; });
		});
	</script>

<script>
	var config = {
		type: 'line',
		data: {
			labels: [],
			datasets: [{
				label: 'My First dataset',
				fill: false,
				backgroundColor: window.chartColors.red,
				borderColor: window.chartColors.red,
				data: []
			}, {
				label: 'My Second dataset',
				fill: false,
				backgroundColor: window.chartColors.blue,
				borderColor: window.chartColors.blue,
				data: [],
			}]
		},
		options: {
			responsive: true,
			title: {
				display: true,
				text: 'Chart with Multiline Labels'
			},
		}
	};

	d3.json("DataDir/class_average_overtime2.json", function (error, data) {
		console.log(data);
		var extent = data.filter(function(e) { return e.month});
		const xdomain = d3.extent(extent);
		console.log(xdomain);
		data.forEach(function(d) {

		})
	})
	

	window.onload = function() {
		var ctx = document.getElementById('canvas').getContext('2d');
		window.myLine = new Chart(ctx, config);
	};
</script>



</body>

</html>